# 001 — Auth enhancement (код GANTT: 43101)

- Код задачи (GANTT): `43101`
- ID (локальный): `001`
- Статус: `in-progress`
- Приоритет: `high`
- Исполнитель: `@todo`
- Дата начала: `2025-11-23`
- Дата окончания: `2025-11-29`
- Процент выполнения: 65

## Описание

Улучшить систему аутентификации: добавить опциональную двухфакторную аутентификацию (TOTP), поддержку OAuth (GitHub, Google), усилить валидацию паролей и защиту от brute-force.

Acceptance criteria:
- Пользователь может включить/отключить TOTP в профиле (QR + seed)
- Поддержка входа через GitHub и Google
- Ограничение попыток входа + lockout + логирование
- Отдельные E2E сценарии для регистрации/входа/восстановления

## Технические шаги (черновик)
1. Добавить колонки в user-таблицу для TOTP секретов и флагов (drizzle schema)
2. Реализовать генерацию/включение TOTP (speakeasy or otplib)
3. Добавить OAuth стратегии (passport) и UI кнопки
4. Добавить rate limiter на роуты аутентификации (express-rate-limit)
5. Добавить unit и integration тесты

## Заметки по безопасности
- Хранить TOTP секреты зашифрованными
- Логи попыток входа хранить в отдельной таблице/сети
